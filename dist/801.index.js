(()=>{"use strict";class t{constructor(t,h,i,e){this.width=t,this.height=h,this.used=i,this.index=e,this.x=0,this.y=0}}const h=(h,i)=>{h.used=!0,h.index=i.index,h.width>i.width&&(h.right=new t(h.width-i.width,i.height,!1),h.right.x=h.x+i.width,h.right.y=h.y),h.height>i.height&&(h.down=new t(h.width,h.height-i.height,!1),h.down.x=h.x,h.down.y=h.y+i.height)};function i(t,h,e){if(!t)return null;if(t.used){return i(t.down,h,e)||i(t.right,h,e)}return t.width>=h&&t.height>=e?t:null}const e={max:(t,h)=>Math.max(h.width,h.height)-Math.max(t.width,t.height),min:(t,h)=>Math.min(h.width,h.height)-Math.min(t.width,t.height),h:(t,h)=>h.height-t.height,w:(t,h)=>h.width-t.width,a:(t,h)=>h.width*h.height-t.width*t.height},n=self;n.onmessage=w=>{const d=w.data;d.sort(((t,h)=>((t,h)=>((t,h,i)=>{let n=null;const w=i.length;for(let d=0;d<w;d++)if(n=e[i[d]](t,h),0!==n)return n;return 0})(t,h,["h","w"]))(t,h)));const s=function(e){const n=e[0];let w=new t(n.width,n.height,!0,n.index);const d=e.length;for(let n=1;n<d;n++){const d=e[n];if(!d.width||!d.height)continue;const s=i(w,d.width,d.height);if(s)h(s,d);else{if(w.width>w.height){const h=new t(w.width,d.height,!1);h.x=0,h.y=w.height;const i=new t(w.width,w.height+d.height,!0);i.x=0,i.y=0,i.down=h,i.right=w,w=i}else{const h=new t(d.width,w.height,!1);h.x=w.width,h.y=0;const i=new t(w.width+d.width,w.height,!0);i.x=0,i.y=0,i.down=w,i.right=h,w=i}const e=i(w,d.width,d.height);e&&h(e,d)}}return w}(d);n.postMessage(s),self.close()}})();